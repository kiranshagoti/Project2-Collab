<div class="container-fluid side bar">
  <div class="row">
    <div class="col-1">
      <div class="list-group" id="list-tab" role="tablist">
        <a class="list-group-item list-group-item-action active bg-danger" style="border-color: #DC3545"
          id="list-home-list" href="/dashboard" role="tab" aria-controls="home">Home</a>
        <a class="list-group-item list-group-item-action" id="list-profile-list" href="/dashboard/profile" role="tab"
          aria-controls="profile">Profile</a>
        <a class="list-group-item list-group-item-action" id="list-settings-list" href="/dashboard/settings" role="tab"
          aria-controls="settings">Settings</a>
        <a class="list-group-item list-group-item-action" id="list-logout-list" href="/auth/logout" role="tab"
          aria-controls="logout">Logout</a>
      </div>
    </div>

    <div class="col-11">
      <div class="container">
        <div class="board-header-content-wrapper">
          <h5>Welcome {{user.username}}!</h5>
          <h3>Create your tasks!</h3>
          <br>
          <br>
          <div class="editable-component" style="width:auto; height:auto;"></div>
          {{!-- <h3><input type="text" name="board-name" placeholder="Board name"></h3>
            <h4><input type="text" name="board-description" placeholder="Add a board description"></h4> --}}
          <div class="createDash drop">
            <button class="createItem btn btn-danger" onclick="createNewItem()">New task</button>

            <form class="form-group" id="taskForm" action="/dashboard" method="post" enctype="multipart/form-data">
            </form>
          </div>
          <br>
          <br>



          <div class="form-row">
            <div class="col-md-2">
              <h5>Task name</h5>
            </div>
            <div class="col-md-2">
              <h5>Responsible</h5>
            </div>
            <div class="col-md-1">
              <h5>Status</h5>
            </div>
            <div class="col-md-1">
              <h5>Date</h5>
            </div>
            <div class="col-md-2">
              <h5>Priority</h5>
            </div>
            <div class="col-md-2">
              <h5>Comment</h5>
            </div>
            <div class="col-md-2">
              <h5>Attached</h5>
            </div>
          </div>







          {{#each tasks}}
          <form id="taskForm" action="/dashboard/{{this._id}}" method="post" enctype="multipart/form-data">





            <input class="form-control" type="text" placeholder="Add task name" name="name" value="{{this.name}}" />


            <select class="form-control" name="responsible">
              <option value="{{this.responsible}}" hidden="hidden" selected="selected">{{this.responsible}}</option>
              {{#each ../names}}
              <option>{{username}}</option>
              {{/each}}
            </select>




            <select class="form-control" name="status">
              <option value="{{this.status}}" hidden="hidden" selected="selected">{{this.status}}</option>
              <option>Stuck</option>
              <option>Working on it</option>
              <option>Done</option>
              <option>Waiting for review</option>
            </select>


            <input class="form-control" type="date" name="dueDate" value="{{this.dueDate}}" />

            <select class="form-control" name="priority">
              <option value="{{this.priority}}" hidden="hidden" selected="selected">{{this.priority}}</option>
              <option>Urgent</option>
              <option>High</option>
              <option>Medium</option>
              <option>Low</option>
            </select>



            <input class="form-control" type="text" placeholder="Add a comment" name="comment"
              value="{{this.comment}}" />
            <a href="">{{this.files.name}}</a>
          </form>
          <form action="/dashboard/delete/{{this._id}}" method="post">
            <button class="btn btn-danger" type="submit">Delete</button>

          </form>
          {{/each}}



        </div>
      </div>
    </div>
  </div>
</div>



{{!-- <form action="/dashboard/" method="POST">
  <input placeholder="Add task" name="Add Task"></input>
  <input placeholder="to do" name="toDo"></input>
  <button>&times;</button>
</form> --}}



{{!-- <a href="/dashboard">Add task</a> --}}

<script>
  function createNewItem() {
    document.querySelector('#taskForm').innerHTML +=
      `
      <input class="form-control" type="text" placeholder="Add task name" name="name"/>
      
      <select class="form-control" name="responsible">
    <option></option>
    {{#each names}}
    <option>{{username}}</option>
    {{/each}}
  </select>

  <select class="form-control" name="status">
    <option></option>
    <option>Stuck</option>
    <option>Working on it</option>
    <option>Done</option>
    <option>Waiting for review</option>
  </select>
  
  <input class="form-control" type="date" name="dueDate"/>

 <select class="form-control" name="priority">
    <option></option>
    <option>Urgent</option>
    <option>High</option>
    <option>Medium</option>
    <option>Low</option>
  </select>

  <input class="form-control" type="text" placeholder="Add a comment" name="comment"/>
  <input class="form-control" type="file" name="files"/>
      `
    document.querySelectorAll(".formBtn").forEach(elem => elem.remove())
    let createBtn = document.createElement('button');
    createBtn.setAttribute("type", "submit")
    createBtn.classList.add("formBtn")
    createBtn.classList.add("btn")
    createBtn.classList.add("btn-danger")
    createBtn.innerText = "Save"
    let dashForm = document.querySelector("#taskForm")

    dashForm.appendChild(createBtn)
  }
</script>